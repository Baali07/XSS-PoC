<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>iframe sandbox escape</title>
</head>
<body>
  <h2>🧪 Running in iframe</h2>
  <p>This page listens to <code>postMessage</code> and evals it if type is <code>"eval"</code>.</p>

  <script>
    // إعلام الصفحة الأم أنه جاهز
    window.parent.postMessage({ typ: "ready" }, "*");

    // الاستماع للرسائل وتنفيذ الكود إن وُجد
    window.addEventListener("message", (event) => {
      if (event.data?.type === "eval" && typeof event.data.code === "string") {
        try {
          eval(event.data.code);
        } catch (e) {
          alert("خطأ أثناء التنفيذ: " + e);
        }
      }
    });
  </script>
</body>
</html>
